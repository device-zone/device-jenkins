#!/bin/bash

#
# /etc/sysconfig/jenkins
# ----------------------

logger -t "${0}" "Notice: Creating jenkins /etc/sysconfig/jenkins..."

if test ! -f "/etc/device/services/app/jenkins/path.txt"; then
  exit 0;
fi
path=$(head -n 1 "/etc/device/services/app/jenkins/path.txt")


cat > "jenkins" <<- EOF
# Generated by $0 on `date`
# DO NOT MODIFY THIS FILE - it will be overwritten on server restart.
#

JAVA_HOME=/etc/alternatives/jre_17

JENKINS_PORT=-1
JENKINS_PREFIX=${path}
JENKINS_UNIX_DOMAIN_PATH=/var/run/jenkins/jenkins.socket

EOF


install -m 644 "jenkins" "/etc/sysconfig/jenkins"


